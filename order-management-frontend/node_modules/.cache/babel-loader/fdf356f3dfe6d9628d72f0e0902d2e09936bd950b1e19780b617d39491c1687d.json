{"ast":null,"code":"import _objectSpread from\"/Users/nshah/GPT Project/order-management-frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{Link,useNavigate}from'react-router-dom';import{fetchOrders,createOrder}from'../services/api';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const OrdersPage=()=>{const[orders,setOrders]=useState([]);const[nextOrderId,setNextOrderId]=useState('');// Next available orderId\nconst[newOrder,setNewOrder]=useState({creator:'',responsible:'',company:''});const[error,setError]=useState(null);const[loading,setLoading]=useState(false);const navigate=useNavigate();// Fetch orders and next order ID\nuseEffect(()=>{const loadOrders=async()=>{try{const{data}=await fetchOrders();console.log('Fetched Orders:',data);// Debugging log\nsetOrders(data.filter(order=>order&&order.orderId));// Filter invalid entries\n}catch(err){setError('Failed to fetch orders.');}};const fetchNextOrderId=async()=>{try{const{data}=await axios.get('http://localhost:5045/api/orders/nextId');console.log('Fetched Next Order ID:',data.nextOrderId);// Debug log\nsetNextOrderId(data.nextOrderId);}catch(err){console.error('Failed to fetch next order ID:',err.message);setNextOrderId('Error fetching ID');}};loadOrders();fetchNextOrderId();},[]);useEffect(()=>{console.log('Next Order ID Updated:',nextOrderId);// Debugging log\n},[nextOrderId]);// Handle form input changes\nconst handleInputChange=e=>{const{name,value}=e.target;setNewOrder(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:value}));};// Handle order creation\nconst handleCreateOrder=async()=>{setLoading(true);try{const response=await createOrder(newOrder);console.log('Created Order:',response);// Debugging log\nsetOrders(prev=>[...prev,response]);// Store the created orderId in local storage\nlocalStorage.setItem('currentOrderId',response.orderId);// Navigate to OrderDetailsPage\nnavigate(\"/orders/\".concat(response.orderId));}catch(err){setError('Failed to create order.');console.error('Error in handleCreateOrder:',err.message);// Debugging log\n}finally{setLoading(false);}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Orders\"}),error&&/*#__PURE__*/_jsx(\"p\",{style:{color:'red'},children:error}),loading&&/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"}),/*#__PURE__*/_jsx(\"ul\",{children:orders.map(order=>/*#__PURE__*/_jsxs(\"li\",{children:[/*#__PURE__*/_jsx(Link,{to:\"/orders/\".concat(order.orderId),children:order.orderId}),\" - \",order.creator,\" - \",order.responsible]},order.orderId))}),/*#__PURE__*/_jsx(\"h2\",{children:\"Create Order\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:e=>{e.preventDefault();handleCreateOrder();},children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"orderId\",children:\"Next Order ID:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"orderId\",value:nextOrderId,readOnly:true// Make it uneditable\n})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"creator\",placeholder:\"Creator\",value:newOrder.creator,onChange:handleInputChange,required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"responsible\",placeholder:\"Responsible\",value:newOrder.responsible,onChange:handleInputChange,required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"company\",placeholder:\"Company\",value:newOrder.company,onChange:handleInputChange,required:true}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading,children:loading?'Creating...':'Create Order'})]})]});};export default OrdersPage;","map":{"version":3,"names":["React","useState","useEffect","Link","useNavigate","fetchOrders","createOrder","axios","jsx","_jsx","jsxs","_jsxs","OrdersPage","orders","setOrders","nextOrderId","setNextOrderId","newOrder","setNewOrder","creator","responsible","company","error","setError","loading","setLoading","navigate","loadOrders","data","console","log","filter","order","orderId","err","fetchNextOrderId","get","message","handleInputChange","e","name","value","target","prev","_objectSpread","handleCreateOrder","response","localStorage","setItem","concat","children","style","color","map","to","onSubmit","preventDefault","htmlFor","type","id","readOnly","placeholder","onChange","required","disabled"],"sources":["/Users/nshah/GPT Project/order-management-frontend/src/pages/OrdersPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Link, useNavigate } from 'react-router-dom';\nimport { fetchOrders, createOrder } from '../services/api';\nimport axios from 'axios';\n\nconst OrdersPage = () => {\n  const [orders, setOrders] = useState([]);\n  const [nextOrderId, setNextOrderId] = useState(''); // Next available orderId\n  const [newOrder, setNewOrder] = useState({ creator: '', responsible: '', company: '' });\n  const [error, setError] = useState(null);\n  const [loading, setLoading] = useState(false);\n\n  const navigate = useNavigate();\n\n  // Fetch orders and next order ID\n  useEffect(() => {\n    const loadOrders = async () => {\n      try {\n        const { data } = await fetchOrders();\n        console.log('Fetched Orders:', data); // Debugging log\n        setOrders(data.filter((order) => order && order.orderId)); // Filter invalid entries\n      } catch (err) {\n        setError('Failed to fetch orders.');\n      }\n    };\n\n    const fetchNextOrderId = async () => {\n      try {\n        const { data } = await axios.get('http://localhost:5045/api/orders/nextId');\n        console.log('Fetched Next Order ID:', data.nextOrderId); // Debug log\n        setNextOrderId(data.nextOrderId);\n      } catch (err) {\n        console.error('Failed to fetch next order ID:', err.message);\n        setNextOrderId('Error fetching ID');\n      }\n    };\n\n    loadOrders();\n    fetchNextOrderId();\n  }, []);\n\n  useEffect(() => {\n    console.log('Next Order ID Updated:', nextOrderId); // Debugging log\n  }, [nextOrderId]);\n\n  // Handle form input changes\n  const handleInputChange = (e) => {\n    const { name, value } = e.target;\n    setNewOrder((prev) => ({ ...prev, [name]: value }));\n  };\n\n  // Handle order creation\n  const handleCreateOrder = async () => {\n    setLoading(true);\n    try {\n      const response = await createOrder(newOrder);\n      console.log('Created Order:', response); // Debugging log\n      setOrders((prev) => [...prev, response]);\n\n      // Store the created orderId in local storage\n      localStorage.setItem('currentOrderId', response.orderId);\n\n      // Navigate to OrderDetailsPage\n      navigate(`/orders/${response.orderId}`);\n    } catch (err) {\n      setError('Failed to create order.');\n      console.error('Error in handleCreateOrder:', err.message); // Debugging log\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div>\n      <h1>Orders</h1>\n      {error && <p style={{ color: 'red' }}>{error}</p>}\n      {loading && <p>Loading...</p>}\n      <ul>\n        {orders.map((order) => (\n          <li key={order.orderId}>\n            <Link to={`/orders/${order.orderId}`}>{order.orderId}</Link> - {order.creator} - {order.responsible}\n          </li>\n        ))}\n      </ul>\n\n      <h2>Create Order</h2>\n      <form\n        onSubmit={(e) => {\n          e.preventDefault();\n          handleCreateOrder();\n        }}\n      >\n        <div>\n          <label htmlFor=\"orderId\">Next Order ID:</label>\n          <input\n            type=\"text\"\n            id=\"orderId\"\n            value={nextOrderId}\n            readOnly // Make it uneditable\n          />\n        </div>\n        <input\n          type=\"text\"\n          name=\"creator\"\n          placeholder=\"Creator\"\n          value={newOrder.creator}\n          onChange={handleInputChange}\n          required\n        />\n        <input\n          type=\"text\"\n          name=\"responsible\"\n          placeholder=\"Responsible\"\n          value={newOrder.responsible}\n          onChange={handleInputChange}\n          required\n        />\n        <input\n          type=\"text\"\n          name=\"company\"\n          placeholder=\"Company\"\n          value={newOrder.company}\n          onChange={handleInputChange}\n          required\n        />\n        <button type=\"submit\" disabled={loading}>\n          {loading ? 'Creating...' : 'Create Order'}\n        </button>\n      </form>\n    </div>\n  );\n};\n\nexport default OrdersPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}